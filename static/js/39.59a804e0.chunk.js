"use strict";(self.webpackChunklearn_jp=self.webpackChunklearn_jp||[]).push([[39],{39:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(43);const s=(e,t,a,s,l)=>{const[i,o]=(0,n.useState)(null),[d,c]=(0,n.useState)([]),[r,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(void 0),[y,x]=(0,n.useState)(void 0),[m,v]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{if(l)return c(l),void v(!1);if(!e)return;(async()=>{try{const a=await e(t);c(a.data)}catch(a){console.log(a)}finally{v(!1)}})()}),[e,t,l]),(0,n.useEffect)((()=>{if(d&&d.length&&(o(Object.keys(d[0]).filter((e=>e!==a&&!(Array.isArray(s)&&-1!==s.indexOf(e))))),-1!==Object.keys(d[0]).indexOf("type"))){const e=d.reduce(((e,t)=>(e[t.type]?e[t.type].push(t):e[t.type]=[t],e)),{});u(Object.keys(e).map((t=>({type:t,data:e[t]}))))}}),[d,a,s]),{data:d,keys:i,typedData:r,loading:m,index:h,setIndex:p,currentType:y,handleCarousel:(e,t)=>{p(e),t&&x(t)}}},l=e=>{const t=new SpeechSynthesisUtterance(e);t.lang="ja-JP";const a=window.speechSynthesis.getVoices().filter((e=>"ja-JP"===e.lang));a.length>0&&(t.voice=a[0]),t.pitch=1.2,t.rate=.9,window.speechSynthesis.speak(t)};var i=a(639),o=a(154),d=a(533),c=a(579);const r=()=>(0,c.jsx)("div",{className:"error-page",children:"No Data to show"}),u=(e,t,a,s)=>{const[l,i]=(0,n.useState)(),[o,d]=(0,n.useState)(),[c,r]=(0,n.useState)(),[u,h]=(0,n.useState)(),[p,y]=(0,n.useState)(),[x,m]=(0,n.useState)(void 0),v=()=>{if(u>=1)h((e=>e-1)),y(c?e.filter((e=>e.type===c))[0].data[u-1]:e[u-1]);else if(o&&0!==o.indexOf(c)){const t=o.indexOf(c)-1,a=o[t],n=e.filter((e=>e.type===a))[0].data,s=n.length;r(a),i(s),h(s-1),y(n[s-1])}},f=()=>{if(u<=l-2)h((e=>e+1)),y(c?e.filter((e=>e.type===c))[0].data[u+1]:e[u+1]);else if(o&&o.indexOf(c)!==o.length-1){const t=o.indexOf(c)+1,a=o[t],n=e.filter((e=>e.type===a))[0].data;r(a),i(n.length),h(0),y(n[0])}};return(0,n.useEffect)((()=>{if(e&&e.length&&"number"===typeof t)if(h(t),s){r(s),d(null===e||void 0===e?void 0:e.map((e=>e.type)));const a=e.filter((e=>e.type===s))[0].data;i(a.length),y(a[t])}else i(e.length),y(e[t])}),[e,t,s]),{visibleData:p,handlePrev:v,handleNext:f,handleClose:()=>{h(null),r(null),d(null),i(null),y(null),a(null)},handleTouchStart:e=>{m(e.touches[0].clientX)},handleTouchEnd:e=>{const t=e.changedTouches[0].clientX,a=x-t;Math.abs(a)>50&&(a>0?f():v()),m(void 0)}}},h=e=>{var t;let{data:a,initialIndex:n,setInitialIndex:s,initialType:o,mainKey:d}=e;const{visibleData:r,handlePrev:h,handleNext:p,handleClose:y,handleTouchStart:x,handleTouchEnd:m}=u(a,n,s,o);return r?(0,c.jsx)("div",{className:"modal-backdrop",children:(0,c.jsxs)("div",{className:"modal-container",children:[(0,c.jsxs)("div",{className:"modal-body",onTouchStart:x,onTouchEnd:m,children:[(0,c.jsx)(i.cAR,{size:20,onClick:e=>{l("kana"===d?r.kana:r.jp)}}),null===(t=Object.keys(r))||void 0===t?void 0:t.map((e=>r[e]?(0,c.jsx)("div",{className:"carousel-key".concat(e===d?" carousel-main-key":""),children:e!==d?e+" : "+r[e]:r[e]},e):(0,c.jsx)(c.Fragment,{})))]}),(0,c.jsxs)("div",{className:"modal-footer",children:[(0,c.jsx)("button",{className:"quiz-button",onClick:h,children:"Prev"}),(0,c.jsx)("button",{className:"quiz-button",onClick:y,children:"Close"}),(0,c.jsx)("button",{className:"quiz-button",onClick:p,children:"Next"})]})]})}):(0,c.jsx)(c.Fragment,{})},p=e=>{let{data:t,keys:a,mainKey:n,letter:s,handleCarousel:o}=e;return null===t||void 0===t?void 0:t.map(((e,t)=>(0,c.jsxs)("div",{className:"".concat(s?"letter-":"","list-element"),onClick:()=>o(t,null===e||void 0===e?void 0:e.type),children:[(0,c.jsxs)("div",{className:s?"":"list-main",children:[e[n],(0,c.jsx)(i.cAR,{size:20,onClick:t=>{t.stopPropagation(),l(s?e.kana:e[n])}})]}),a.map((t=>(0,c.jsx)("div",{children:e[t]})))]},t)))},y=e=>{let{heading:t,dataService:a,level:l,mainKey:i,noShowKeys:u,letter:y,dataValues:x}=e;const{data:m,keys:v,typedData:f,loading:j,index:k,setIndex:g,currentType:S,handleCarousel:b}=s(a,l,i,u,x);return j?(0,c.jsx)(d.A,{}):(0,c.jsxs)("div",{className:"list",children:[(0,c.jsx)("h1",{className:"list-heading",children:t}),v?f?f.map(((e,t)=>(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)("h2",{className:"list-heading",children:e.type}),(0,c.jsx)(p,{data:e.data,mainKey:i,letter:y,keys:v,handleCarousel:b})]},t))):(0,c.jsx)(p,{data:m,keys:v,mainKey:i,letter:y,handleCarousel:b}):(0,c.jsx)(r,{}),(0,c.jsx)(o.A,{}),(0,c.jsx)(h,{data:f||m,initialIndex:k,setInitialIndex:g,initialType:S,mainKey:i})]})}},154:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(43),s=a(804);const l=()=>{const[e,t]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;t(0===e)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),{top:e,scrollToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}};var i=a(579);const o=()=>{const{top:e,scrollToTop:t}=l();return!e&&(0,i.jsx)(s.yL8,{className:"top-btn quiz-button",onClick:t,size:20})}}}]);
//# sourceMappingURL=39.59a804e0.chunk.js.map
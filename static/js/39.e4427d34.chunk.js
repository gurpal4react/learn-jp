"use strict";(self.webpackChunklearn_jp=self.webpackChunklearn_jp||[]).push([[39],{39:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(43);const s=(e,t,a,s,l)=>{const[i,o]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[r,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(void 0),[y,m]=(0,n.useState)(void 0),[x,v]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{if(l)return d(l),void v(!1);if(!e)return;(async()=>{try{const a=await e(t);d(a.data)}catch(a){console.log(a)}finally{v(!1)}})()}),[e,t,l]),(0,n.useEffect)((()=>{if(c&&c.length&&(o(Object.keys(c[0]).filter((e=>e!==a&&!(Array.isArray(s)&&-1!==s.indexOf(e))))),-1!==Object.keys(c[0]).indexOf("type"))){const e=c.reduce(((e,t)=>(e[t.type]?e[t.type].push(t):e[t.type]=[t],e)),{});u(Object.keys(e).map((t=>({type:t,data:e[t]}))))}}),[c,a,s]),{data:c,keys:i,typedData:r,loading:x,index:h,currentType:y,handleCarousel:(e,t)=>{p(e),t&&m(t)}}},l=e=>{const t=new SpeechSynthesisUtterance(e);t.lang="ja-JP";const a=window.speechSynthesis.getVoices().filter((e=>"ja-JP"===e.lang));a.length>0&&(t.voice=a[0]),t.pitch=1.2,t.rate=.9,window.speechSynthesis.speak(t)};var i=a(639),o=a(154),c=a(533),d=a(579);const r=()=>(0,d.jsx)("div",{className:"error-page",children:"No Data to show"}),u=(e,t,a)=>{const[s,l]=(0,n.useState)(),[i,o]=(0,n.useState)(),[c,d]=(0,n.useState)(),[r,u]=(0,n.useState)(),[h,p]=(0,n.useState)(),[y,m]=(0,n.useState)(void 0);console.log({initialIndex:t,index:r,visibleData:h});const x=()=>{if(r>=1)u((e=>e-1)),p(c?e.filter((e=>e.type===c))[0].data[r-1]:e[r-1]);else if(i&&0!==i.indexOf(c)){const t=i.indexOf(c)-1,a=i[t],n=e.filter((e=>e.type===a))[0].data,s=n.length;d(a),l(s),u(s-1),p(n[s-1])}},v=()=>{if(r<=s-2)u((e=>e+1)),p(c?e.filter((e=>e.type===c))[0].data[r+1]:e[r+1]);else if(i&&i.indexOf(c)!==i.length-1){const t=i.indexOf(c)+1,a=i[t],n=e.filter((e=>e.type===a))[0].data;d(a),l(n.length),u(0),p(n[0])}};return(0,n.useEffect)((()=>{if(e&&e.length&&"number"===typeof t)if(u(t),a){d(a),o(null===e||void 0===e?void 0:e.map((e=>e.type)));const n=e.filter((e=>e.type===a))[0].data;l(n.length),p(n[t])}else l(e.length),p(e[t])}),[e,t,a]),{visibleData:h,handlePrev:x,handleNext:v,handleClose:()=>{u(null),d(null),o(null),l(null),p(null)},handleTouchStart:e=>{m(e.touches[0].clientX)},handleTouchEnd:e=>{const t=e.changedTouches[0].clientX,a=y-t;Math.abs(a)>50&&(a>0?v():x()),m(void 0)}}},h=e=>{var t;let{data:a,initialIndex:n,initialType:s,mainKey:o}=e;const{visibleData:c,handlePrev:r,handleNext:h,handleClose:p,handleTouchStart:y,handleTouchEnd:m}=u(a,n,s);return console.log({a:c?"yes":"no"}),c?(0,d.jsx)("div",{className:"modal-backdrop",children:(0,d.jsxs)("div",{className:"modal-container",children:[(0,d.jsxs)("div",{className:"modal-body",onTouchStart:y,onTouchEnd:m,children:[(0,d.jsx)(i.cAR,{size:20,onClick:e=>{l("kana"===o?c.kana:c.jp)}}),null===(t=Object.keys(c))||void 0===t?void 0:t.map((e=>c[e]?(0,d.jsx)("div",{className:"carousel-key".concat(e===o?" carousel-main-key":""),children:e!==o?e+" : "+c[e]:c[e]},e):(0,d.jsx)(d.Fragment,{})))]}),(0,d.jsxs)("div",{className:"modal-footer",children:[(0,d.jsx)("button",{className:"quiz-button",onClick:r,children:"Prev"}),(0,d.jsx)("button",{className:"quiz-button",onClick:p,children:"Close"}),(0,d.jsx)("button",{className:"quiz-button",onClick:h,children:"Next"})]})]})}):(0,d.jsx)(d.Fragment,{})},p=e=>{let{data:t,keys:a,mainKey:n,letter:s,handleCarousel:o}=e;return null===t||void 0===t?void 0:t.map(((e,t)=>(0,d.jsxs)("div",{className:"".concat(s?"letter-":"","list-element"),onClick:()=>o(t,null===e||void 0===e?void 0:e.type),children:[(0,d.jsxs)("div",{className:s?"":"list-main",children:[e[n],(0,d.jsx)(i.cAR,{size:20,onClick:t=>{t.stopPropagation(),l(s?e.kana:e[n])}})]}),a.map((t=>(0,d.jsx)("div",{children:e[t]})))]},t)))},y=e=>{let{heading:t,dataService:a,level:l,mainKey:i,noShowKeys:u,letter:y,dataValues:m}=e;const{data:x,keys:v,typedData:f,loading:j,index:k,currentType:g,handleCarousel:b}=s(a,l,i,u,m);return j?(0,d.jsx)(c.A,{}):(0,d.jsxs)("div",{className:"list",children:[(0,d.jsx)("h1",{className:"list-heading",children:t}),v?f?f.map(((e,t)=>(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)("h2",{className:"list-heading",children:e.type}),(0,d.jsx)(p,{data:e.data,mainKey:i,letter:y,keys:v,handleCarousel:b})]},t))):(0,d.jsx)(p,{data:x,keys:v,mainKey:i,letter:y,handleCarousel:b}):(0,d.jsx)(r,{}),(0,d.jsx)(o.A,{}),(0,d.jsx)(h,{data:f||x,initialIndex:k,initialType:g,mainKey:i})]})}},154:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(43),s=a(804);const l=()=>{const[e,t]=(0,n.useState)(!0);return(0,n.useEffect)((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;t(0===e)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),{top:e,scrollToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}};var i=a(579);const o=()=>{const{top:e,scrollToTop:t}=l();return!e&&(0,i.jsx)(s.yL8,{className:"top-btn quiz-button",onClick:t,size:20})}}}]);
//# sourceMappingURL=39.e4427d34.chunk.js.map